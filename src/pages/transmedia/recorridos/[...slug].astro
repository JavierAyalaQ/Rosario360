---
import LayoutTransmedia from "@layouts/LayoutTransmedia.astro";

import recorridos from "@data/recorridos.json";
import Recorrido from "@components/sections/Recorrido.tsx";
import RecorridoImagenes from "@components/sections/RecorridoImagenes.tsx";


export function getStaticPaths() {
    const places = recorridos;
    return recorridos.map(({slug}) => ({
        params: { slug },
        props: { places }
    }));
}

const { slug } = Astro.params;


// NavegaciÃ³n
const place = recorridos.find(p =>
    p.slug === slug
);

if (!place) {
    throw new Error(`Lugar con Slug: ${slug} no encontrado`);
}
const { id, name, description, image } = place;




const videoOptions = 
[
    {
        label: "vid", 
        src: "./public/vid/video-sra.mp4"
    },
    {
        label: "vid", 
        src: "./public/vid/video-sra.mp4"
    },
];

import bgIntro from "@vid/bg-intro.mp4";




import cultura from "@data/cultura.json";

const frames = cultura.map(({ href }) => href);

---

<LayoutTransmedia title={`Recorrido: ${name}`}>
    <slot slot="main" >
        <!-- <Recorrido client:visible videoSrc={bgIntro} videoOptions={videoOptions} frameDelay={250} />
 -->
        <RecorridoImagenes client:visible frames={frames} frameRate={30} frameDelay={250} />
    </slot>
</LayoutTransmedia>